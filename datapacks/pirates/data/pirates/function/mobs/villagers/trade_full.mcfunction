execute as @e[type=villager,tag=pir.cap_tr.bb,tag=!pir.up_full] at @s run data merge entity @s {Offers:{Recipes:[{rewardExp:0b,maxUses:0,buy:{id:"minecraft:gold_ingot",count:8b},sell:{id:"minecraft:firework_star",Count:1b,components:{custom_model_data:70200,custom_data:{Tags:["pir.update","pir.up1","pir.selected_item"]},item_name:'{"translate":"pir.update1.bb","italic":false}'}}},{rewardExp:0b,maxUses:0,buy:{id:"minecraft:gold_ingot",count:12b},sell:{id:"minecraft:firework_star",Count:1b,components:{custom_model_data:70200,custom_data:{Tags:["pir.update","pir.up2","pir.selected_item"]},item_name:'{"translate":"pir.update2.bb","italic":false}'}}},{rewardExp:0b,maxUses:0,buy:{id:"minecraft:gold_ingot",count:24b},sell:{id:"minecraft:firework_star",Count:1b,components:{custom_model_data:70200,custom_data:{Tags:["pir.update","pir.up3","pir.selected_item"]},item_name:'{"translate":"pir.update3.bb","italic":false}'}}},{rewardExp:0b,maxUses:32,buy:{id:"minecraft:gold_ingot",count:2b},sell:{id:"minecraft:firework_star",count:1b,components:{custom_model_data:73003,item_name:'{"translate":"pir.weapons_charge.bb","italic":false}'}}},{rewardExp:0b,maxUses:2,buy:{id:"minecraft:gold_ingot",count:4b},sell:{id:"minecraft:carrot_on_a_stick",count:1b,components:{custom_model_data:73001,max_damage:5,custom_data:{Tags:["pir.smoking_pipe.bb","pir.rcm_stick.bb"]},item_name:'{"translate":"pir.smoking_pipe.bb","italic":false,"color":"yellow"}'}}},{rewardExp:0b,maxUses:16,buy:{id:"minecraft:gold_ingot",count:6b},sell:{id:"minecraft:knowledge_book",count:1b,components:{custom_model_data:78000,item_name:'{"translate":"pir.recipe_cannonball.bb","color":"white","italic":false}',recipes:["pirates:cannonball_fire"]}}},{rewardExp:0b,maxUses:12,buy:{id:"minecraft:gold_ingot",count:8b},sell:{id:"minecraft:knowledge_book",count:1b,components:{custom_model_data:78000,item_name:'{"translate":"pir.recipe_bomb.bb","color":"white","italic":false}',recipes:["pirates:bomb"]}}},{rewardExp:0b,maxUses:3,buy:{id:"minecraft:gold_ingot",count:14b},sell:{id:"minecraft:carrot_on_a_stick",count:1b,components:{custom_model_data:73004,custom_data:{Tags:["pir.sail.bb","pir.fishing_rod_sail.bb","pir.rcm_stick.bb"]},item_name:'{"translate":"pir.f_sail.bb","italic":false}'}}}]}}
execute as @e[type=villager,tag=pir.cap_tr.bb,tag=!pir.up_full] at @s run tag @s add pir.up_full

advancement revoke @s only pirates:work/trade_up3